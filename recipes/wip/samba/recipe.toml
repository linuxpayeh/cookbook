#TODO: needs gnutls3 to compile
[source]
git = "https://gitlab.redox-os.org/redox-os/samba.git"
upstream = "https://github.com/samba-team/samba.git"

[build]
template = "custom"
dependencies = [
    "gnutls3"
]
script = """
rsync -av --delete --exclude .git "${COOKBOOK_SOURCE}/" ./
cp -v "${COOKBOOK_RECIPE}/answers.txt" answers.txt

COOKBOOK_CONFIGURE_FLAGS=(
    --builtin-libraries=ALL
    --cross-compile
    --cross-answers=answers.txt
    --disable-python
    --disable-rpath
    --enable-fhs
    --host="${TARGET}"
    --localstatedir=/var
    --prefix=/usr
    --sysconfdir=/etc
    --with-static-modules=ALL
    --without-ad-dc
)
cookbook_configure
"""
